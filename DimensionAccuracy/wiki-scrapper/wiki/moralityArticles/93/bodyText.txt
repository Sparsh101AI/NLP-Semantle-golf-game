Madagascar, then officially known as French Madagascar, was a French colony at the outbreak of the Second World War, having been under French administration since 1885. It played an important role in the war due to the presence of critically important harbors, the contribution of Malagasy troops, and was also the scene of fighting between Allied and Vichy French forces in 1942. After the fall of France in 1940, Madagascar became a crucial flashpoint in contention between the Free French movement and Vichy France. The island was also consequential in the Pacific theater of the war as Imperial Japanese naval forces operated unopposed off the island for some time. 
In 1942, the British and several other Allied forces launched an invasion of Madagascar, seeking to protect its position as an important juncture in Allied shipping and deny its use to the Axis. In addition to its role as a key link in the Allied supply lines and major provider of troops, Madagascar was also briefly considered as the solution to the Jewish Question by the government of Nazi Germany who openly floated deporting Europe's Jewish population to the island in 1940. This scheme known as the Madagascar Plan never came to fruition because of the British takeover. The island was officially handed over from the British to Free France in 1943 under whose control it remained for the remainder of the war. 
British claims to Madagascar were withdrawn in 1885 after the signing of the Treaty of Berlin, placing Madagascar solely within the colonial dominion of France. France invaded the island of Madagascar in 1883, setting off the first engagement of a series of armed conflicts that would come to be known as the Franco-Hova Wars which ultimately ended in 1897 with the deposition of Queen Ranavalona III and the creation of the Malagasy Protectorate. The protectorate would soon become French Madagascar. 
Under French rule, Madagascar was settled with plantations to export crops, primarily sugar, and the capital city of Antananarivo was developed further. A coaling station was established in the city Antsiranana (then known as Diego-Suarez), located on Madagascar's northern tip which became a frequent stopover for French vessels heading further east. In World War I, tens of thousands of Malagasy men were drafted into the French army to serve on the Western Front, setting the stage for future conscription of Madagascar's male population to defend mainland France.
Planning for the deportation of Europe's Jews overseas began in 1938. However, Madagascar was not brought up as a possibility until June 1940 when it was proposed by Franz Rademacher. The intention was to transport Europe's Jews to the island where they would be under strict control by the Schutzstaffel who would manage Madagascar like a police state.
This was to be the "Final Solution" to the supposed Jewish Question, a massive forced exodus of millions to a faraway African island where they would live in effective quarantine and disconnected from the rest of the world. Over a period of four years, one million Jews a year would be sent to the island under the assumption conditions would be too harsh and many would perish.
The plan was never carried out. Germany suffered a defeat in the battle of Britain which meant that a German capture and commandeering of the British merchant fleet to transport millions of Jews became unfeasible. In 1942, Madagascar was invaded and captured by British forces in the battle of Madagascar further complicating matters. The Madagascar Plan was scrapped and instead the Jewish population would have to be removed through the Holocaust.
The Second World War saw tens of thousands of Malagasy men forced into the ranks of the French army yet again. 34,000 of these Malagasy conscripts were in France when it capitulated in the summer of 1940 with an additional 72,000 still in Madagascar awaiting transport to Europe. Malagasy troops captured by Germany during the invasion were treated harshly as many were subject to massacres and summary executions upon capture. Others were killed when they reached prisoner of war camps. This was in part due to German propaganda that depicted black French troops as savages who fought to the death and took no prisoners.
Against Charles De Gaulle's objections and urgings to join the Free French, the colonial administration under the leadership of Governor-General Armand Annet of French Madagascar pledged their allegiance to Petain and Vichy France. This move exasperated De Gaulle and worried the British command. British commanders worried that French Madagascar's allegiance to the Vichy government would pave the way for the establishment of Axis bases on the island. Japanese, German, and Italian vessels, particularly merchant raiders and submarines, had already been operating in the island's waters, attacking Allied shipping at will and inflicting numerous losses. Losing Madagascar to the Axis would mean exposing the coast of east Africa and the Indian Ocean to Axis attack. A plan was devised by Winston Churchill to seize control of Madagascar and to De Gaulle's irritation and surprise, Free French troops were excluded.
An Allied naval force consisting of over 50 ships under the command of Rear Admiral Edward Neville Syfret arrived off the coast of Madagascar in May 1942. The fleet had two aircraft carriers, HMS Illustrious and HMS Indomitable as well as the battleship HMS Ramillies, an obsolete vessel of the British Home Fleet. After reconnaissance overflights by the South African Air Force and naval shelling, the first amphibious assaults were undertaken by British troops of the 29th Independent Infantry Brigade Group and No. 5 Commando who came ashore in landing crafts in northern Madagascar, just west of Diego Suarez. The 17th Infantry Brigade landed shortly after.
Facing little resistance, the British troops seized Vichy positions around Diego Suarez, taking one hundred prisoners. Heavy fighting broke out the following day on May 6 when British troops met the dug-in Vichy troops guarding Antisarane. The British eventually overcame the resistance by moving through surrounding swamps and marshes and capturing the city later that night.
Governor-General Annet had 8,000 troops at his disposal, all but 2,000 of whom were Malagasy. They were positioned to defend the island's strategic sites such as harbors and possible amphibious landing sites. However, they were outnumbered by the British and their Allies who had close to twice the number of troops. Regardless, a cable from Vichy leader Pierre Laval ordered Annet to defend Madagascar "as long as possible, by all possible means, and with no other considerations."
Japanese submarines also participated in the battle, with the submarines I-10, I-16, and I-20 attacking British ships. The submarines launched midget submarines that attacked HMS Ramillies, damaging her, and sunk the British motor tanker, British Loyalty. Both midget submarines were eventually lost; one at sea, and one when the crew was ambushed onshore and killed by British troops.   
After the capture of Diego Suarez and Antisarane fighting on the island continued at a low intensity. The British made landings on Madagascar's west coast with the intention of moving inland from there. In September, the colonial capital of 'Tana' or Antananarivo was captured by the British. Nonetheless, resistance continued and Vichy Governor-General Annet remained at large. Several other Malagasy towns and cities fell to the British before Annet surrendered in November after signing an armistice.
Madagascar remained firmly in Allied hands for the remainder of the war, becoming an important link in the nexus of Allied shipping lines as a link between Western Europe, the East Indies, Africa, and the Middle East. Madagascar's deepwater port of Diego Suarez remained heavily defended, and created a base from which Allied ships could combat Japanese submarines. In 1943, British forces left Madagascar and full control was given to Free France and Paul Legentilhomme was appointed to serve as Commissioner of Madagascar. U-boats of the Kriegsmarine continued to operate in the seas around Madagascar until at least the end of 1944. In August 1944, a trio of U-boats sank eight merchant ships in the Mozambique Channel. On 5 September 1944, U-861 sank a Greek freighter off the coast of Madagascar.
At the Brazzaville Conference in 1944, Charles De Gaulle gave all of France's colonies, including Madagascar, representation in the French National Assembly as a way of securing their loyalty in the face of rising anti-colonial sentiments worldwide.
At the conclusion of the war, thousands of Malagasy troops returned home to Madagascar contributing to the already growing nationalist and pro-independence sentiment on the island. Many Malagasy were angered at France's treatment of its colonial subjects as second-class citizens and the forced conscription of its men into the armed services. In 1946, Madagascar's representatives in the National Assembly submitted a bill to grant Madagascar its independence from France. It was rejected. All of these events eventually culminated in the Malagasy Uprising of 1947 which saws tens of thousands of people on the island killed when French forces violently crushed the rebellion. Madagascar did not achieve independence until 1960.
